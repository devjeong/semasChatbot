# 소진공 AI 챗봇 사용자 가이드 v1.1

<p align="center">
  <img src="src/main/resources/META-INF/pluginIcon.svg" alt="Semas Chatbot Icon" width="64" height="64">
</p>

<p align="center">
  <strong>🚀 AI와 함께하는 스마트한 코딩 여행을 시작하세요!</strong>
</p>

---

## 📖 이 가이드는 누구를 위한 것인가요?

- ✅ **Java/Kotlin 개발자**가 AI의 도움을 받고 싶을 때
- ✅ **코드 리뷰**를 AI에게 받고 싶을 때  
- ✅ **리팩토링**을 자동화하고 싶을 때
- ✅ **프로젝트 코드베이스 전체**를 이해하고 싶을 때
- ✅ **코딩 생산성**을 향상시키고 싶을 때
- ✅ **안전한 로컬 AI**를 사용하고 싶을 때

---

## 🎯 5분 빠른 시작 가이드

### Step 1: 플러그인 열기 & 인증
1. IntelliJ IDEA 우측 사이드바에서 **"semasChatbot"** 아이콘 클릭
2. 🔐 **인증 팝업**이 나타나면 인증키 입력: `semas1@3`
3. 인증 성공 후 **자동으로 프로젝트 인덱싱**이 시작됩니다!

### Step 2: 프로젝트 인덱싱 완료 기다리기
```
🔍 프로젝트 파일을 스캔하고 있습니다...
📂 지원되는 파일 확장자: java, kt, js, ts, vue, sql, xml, yml, yaml, json
⚙️ PSI 트리를 분석하여 코드 구조를 파악합니다...
🔧 인덱싱 통계를 생성하고 있습니다...
🎉 자동 프로젝트 인덱싱이 완료되었습니다!
🔄 실시간 인덱싱이 활성화되었습니다. 파일 변경사항이 자동으로 반영됩니다!
```

### Step 3: 서버 설정 (선택사항)
1. 상단의 **🌐 URL** 버튼 클릭
2. LM Studio 서버 주소 입력 (예: `http://192.168.1.100:1234/v1`)
3. **확인** 클릭하여 설정 완료

### Step 4: 첫 번째 질문하기
```
🗣️ 채팅창에 입력: "이 프로젝트의 주요 기능은 무엇인가요?"
```

### Step 5: 코드 분석해보기
1. 에디터에서 코드 일부분 선택
2. 우클릭 → **"Send Selection to Chat"** 클릭
3. 채팅창에 "이 코드는 무엇을 하는 건가요?" 입력

🎉 **축하합니다!** 이제 AI 코딩 어시스턴트와 함께 개발할 준비가 완료되었습니다.

---

## 🎨 UI 둘러보기

### 챗봇 창 구성 요소

```
┌─────────────────────────────────────────────────────────┐
│ [⚙️ Prompt] [🌐 URL] [🔐 인증] [📄 전체 분석] [📖 가이드] │  ← 상단 버튼들
├─────────────────────────────────────────────────────────┤
│ 🤖 소진공: ✅ 인증이 완료되었습니다! 자동으로 프로젝트  │
│           인덱싱을 시작합니다.                         │
│                                                         │
│ 🤖 소진공: 🔍 프로젝트 파일을 스캔하고 있습니다...      │
│                                                         │
│ 🤖 소진공: 🎉 자동 프로젝트 인덱싱이 완료되었습니다!    │ ← 대화 영역
│                                                         │
│ 💬 나: 이 프로젝트의 인증 로직은 어떻게 동작하나요?     │
│                                                         │
│ 🤖 소진공: [RAG_QUESTION] 프로젝트의 인증은 ChatService│
│           의 authenticateUser 메서드에서...            │
├─────────────────────────────────────────────────────────┤
│ 📁 선택된 파일: UserService.kt (127줄)                   │ ← 파일 정보
├─────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 여기에 메시지를 입력하세요...                        │ │ ← 입력창
│ └─────────────────────────────────────────────────────┘ │
│ [📤 Send(Ctrl+Enter)] [🔄 Reset]                       │ ← 하단 버튼들
└─────────────────────────────────────────────────────────┘
```

### 🎛️ 버튼 상세 설명

#### **상단 기능 버튼들**
- **⚙️ Prompt**: AI의 성격과 역할을 변경할 수 있습니다
- **🌐 URL**: LM Studio 서버 주소를 변경할 수 있습니다 (실시간 적용)
- **🔐 인증**: 사용자 인증 상태 확인 및 재인증
- **📄 전체 분석**: 현재 파일 전체를 AI가 이해하도록 설정
- **📖 가이드**: 이 사용자 가이드를 웹브라우저에서 열기

#### **Tools 메뉴의 인덱싱 제어 기능들** (🆕 NEW!)
- **Force Reindexing**: 전체 프로젝트를 강제로 재인덱싱합니다
- **Show Indexing Statistics**: 인덱싱 통계 및 성능 메트릭을 표시합니다
- **Toggle Real-time Indexing**: 실시간 인덱싱을 활성화/비활성화합니다

#### **하단 액션 버튼들**
- **📤 Send**: 메시지 전송 (Ctrl+Enter로도 가능)
- **🔄 Reset**: 대화 기록 및 인증 상태 초기화

---

## 🧠 스마트 질문 답변 시스템

### 🔍 RAG 기반 코드베이스 질문

인증 후 자동 인덱싱이 완료되면, 프로젝트 전체 코드베이스를 기반으로 질문할 수 있습니다!

#### **코드베이스 질문 예시**
```
✅ "인증은 어떻게 처리되나요?"
✅ "사용자 메시지는 어디서 처리되나요?"
✅ "이 프로젝트의 주요 클래스들은 무엇인가요?"
✅ "에러 처리는 어떻게 구현되어 있나요?"
✅ "데이터베이스 연결은 어떤 방식을 사용하나요?"
```

#### **AI 응답 예시**
```
💬 나: "인증은 어떻게 처리되나요?"

🤖 AI: [RAG_QUESTION] 프로젝트의 인증은 다음과 같이 처리됩니다:

=== 참조 코드 1: ChatService.kt (METHOD) ===
위치: /src/main/kotlin/.../ChatService.kt:194-211
시그니처: authenticateUser(String): Boolean

```kotlin
fun authenticateUser(inputKey: String): Boolean {
    if (configProperties == null) {
        configProperties = loadConfigProperties()
    }
    
    val correctKey = configProperties?.getProperty("auth.key")
    val isValid = correctKey != null && inputKey.trim() == correctKey
    
    if (isValid) {
        isAuthenticated = true
        // 인증 성공 시 자동으로 프로젝트 인덱싱 시작
        sendMessage("✅ 인증이 완료되었습니다!", isUser = false)
        startAutoIndexing()
    }
    
    return isValid
}
```

1. 인증키는 config.properties 파일에서 관리됩니다
2. 사용자가 입력한 키와 저장된 키를 비교합니다
3. 인증 성공 시 자동으로 프로젝트 인덱싱이 시작됩니다
...
```

### 🏷️ 응답 타입 구분

AI 응답 앞에 태그가 붙어 어떤 종류의 답변인지 쉽게 구분할 수 있습니다:

- **[RAG_QUESTION]**: 프로젝트 코드베이스 기반 답변
- **[GENERAL]**: 일반적인 대화나 프로그래밍 지식 답변
- **[Modified]**: 코드 수정 결과
- **[NewCode]**: 새로운 코드 생성 결과

---

## 💡 스마트 사용법

### 🔍 코드 분석 요청하기

#### **방법 1: 부분 코드 선택**
```java
// 예시: 이 메서드를 선택하고
public User findUserById(Long id) {
    return userRepository.findById(id).orElse(null);
}
```
1. 코드 선택 → 우클릭 → "Send Selection to Chat"
2. **추천 질문들:**
   ```
   "이 코드에 문제가 있나요?"
   "성능을 개선할 방법이 있나요?"
   "예외 처리를 추가해주세요"
   "이 코드를 설명해주세요"
   ```

#### **방법 2: 전체 파일 분석**
1. **"전체 파일 분석"** 버튼 클릭
2. **추천 질문들:**
   ```
   "이 클래스의 구조를 개선해주세요"
   "SOLID 원칙에 맞게 리팩토링해주세요"
   "테스트 코드를 만들어주세요"
   "주석을 추가해주세요"
   ```

#### **방법 3: 프로젝트 전체 질문 (🆕 NEW!)**
인덱싱 완료 후 바로 질문할 수 있습니다:
```
"이 프로젝트에서 Spring Boot는 어떻게 사용되나요?"
"데이터베이스 관련 코드는 어디에 있나요?"
"에러 핸들링 패턴은 무엇을 사용하나요?"
"REST API는 어떻게 구현되어 있나요?"
```

### 🛠️ 코드 수정 요청하기

#### **간단한 수정**
```
✅ 좋은 예시:
"이 메서드에 null 체크를 추가해주세요"
"변수명을 더 명확하게 바꿔주세요"
"주석을 영어로 번역해주세요"

❌ 애매한 예시:
"이거 고쳐주세요"
"더 좋게 만들어주세요"
```

#### **복잡한 리팩토링**
```
✅ 좋은 예시:
"이 전체 클래스를 Builder 패턴으로 변경해주세요"
"Spring Boot 스타일로 전체 파일을 리팩토링해주세요"
"이 파일의 모든 메서드에 JavaDoc을 추가해주세요"

💡 팁: "전체", "모든", "파일" 등의 키워드를 사용하면 
      전체 파일 수정 모드로 작동합니다!
```

### ⚡ Diff 창 활용하기

코드 수정을 요청하면 **Diff 창**이 나타납니다:

```
┌─────────────────────────────────────────────┐
│ 코드 변경 제안: UserService.kt              │
├─────────────────┬───────────────────────────┤
│ 🔴 Original     │ 🟢 Modified               │
│                 │                           │
│ return repo     │ if (id == null) {         │
│   .findById(id) │   throw new IllegalArgu-  │
│   .orElse(null);│   mentException("ID가    │
│                 │   null입니다");           │
│                 │ }                         │
│                 │ return repo.findById(id)  │
│                 │   .orElseThrow(() ->      │
│                 │   new UserNotFound-       │
│                 │   Exception("사용자 없음"));│
├─────────────────┴───────────────────────────┤
│ [✅ 적용] [❌ 거절] [취소]                    │
└─────────────────────────────────────────────┘
```

**버튼 기능:**
- **✅ 적용**: 변경사항을 코드에 반영
- **❌ 거절**: 변경사항을 취소하고 원본 유지  
- **취소**: 그냥 창 닫기

---

## 🔄 실시간 인덱싱 시스템 (🆕 NEW!)

### 🚀 자동 파일 변경 감지

인증 완료 후 **실시간 인덱싱**이 자동으로 활성화됩니다:

```
✅ 파일 생성/수정/삭제 시 자동 감지
✅ 배치 처리로 성능 최적화
✅ 해시 기반 중복 인덱싱 방지
✅ 백그라운드에서 자동 처리
```

### 📊 인덱싱 통계 확인하기

**Tools → Show Indexing Statistics**를 통해 상세한 통계를 확인할 수 있습니다:

```
=== 서비스 상태 ===
상태: 활성
가동시간: 2시간 15분
처리된 파일: 1,247개

=== 인덱싱 통계 ===
총 코드 조각: 3,456개
파일: 1,247개
클래스: 892개
메서드: 2,134개
필드: 1,567개

=== 해시 통계 ===
총 계산 횟수: 5,678회
해시 일치: 4,123회 (72.6%)
해시 불일치: 1,555회 (27.4%)
메모리 사용량: 12.34MB
```

### 🎛️ 인덱싱 제어 기능

#### **강제 재인덱싱**
- **Tools → Force Reindexing**: 전체 프로젝트 재인덱싱
- 해시 캐시 초기화 후 처음부터 다시 인덱싱
- 대용량 프로젝트는 시간이 소요될 수 있음

#### **실시간 인덱싱 토글**
- **Tools → Toggle Real-time Indexing**: 실시간 인덱싱 활성화/비활성화
- 비활성화 시 파일 변경사항이 자동으로 반영되지 않음
- 필요 시 수동으로 재인덱싱 수행

#### **통계 모니터링**
- **Tools → Show Indexing Statistics**: 실시간 성능 모니터링
- 배치 처리 시간, 파일 인덱싱 시간 등 상세 메트릭
- 메모리 사용량 및 해시 캐시 상태 확인

### 🔧 성능 최적화 기능

#### **배치 처리**
- 여러 파일 변경을 모아서 일괄 처리
- 최대 10개 파일까지 배치로 처리
- 1초 간격으로 자동 배치 실행

#### **해시 기반 중복 방지**
- SHA-256 해시로 파일 내용 변경 감지
- 내용이 동일한 파일은 재인덱싱 건너뛰기
- 메모리 효율성 및 성능 향상

#### **스마트 파일 필터링**
- 지원되는 확장자만 인덱싱 (java, kt, js, ts, vue, sql, xml, yml, yaml, json)
- 빌드 디렉토리, node_modules 등 제외
- 10MB 이상 대용량 파일 자동 제외

---

## 🎯 실전 사용 시나리오

### 📋 시나리오 0: 최초 설정 및 프로젝트 탐색

**상황**: 새로운 프로젝트를 받아서 전체적인 구조를 파악하고 싶다.

**🔐 인증 및 자동 인덱싱:**
1. 챗봇 창 열기
2. 인증 팝업에 `semas1@3` 입력
3. 자동 인덱싱 완료까지 대기 (30초~2분)
4. "🎉 자동 프로젝트 인덱싱이 완료되었습니다!" 메시지 확인

**🔍 프로젝트 탐색 질문들:**
```
"이 프로젝트의 주요 기능은 무엇인가요?"
"프로젝트 구조를 설명해주세요"
"주요 컴포넌트들과 그 역할은 무엇인가요?"
"데이터베이스 연결은 어떻게 되어 있나요?"
"API 엔드포인트들은 어디에 정의되어 있나요?"
```

### 📋 시나리오 1: 코드 리뷰 받기

**상황**: 내가 작성한 코드에 문제가 없는지 확인하고 싶다.

```java
// 문제가 있을 수 있는 코드
@Service
public class UserService {
    @Autowired
    private UserRepository userRepository;
    
    public User createUser(String name, String email) {
        User user = new User();
        user.setName(name);
        user.setEmail(email);
        return userRepository.save(user);
    }
}
```

**🔍 Step-by-step:**
1. 클래스 전체 선택 → "Send Selection to Chat"
2. 질문: **"이 코드를 리뷰해주세요. 개선점이 있나요?"**
3. AI 답변에서 개선점 확인
4. 개선 요청: **"이 문제들을 수정해주세요"**
5. Diff 창에서 개선된 코드 확인 후 적용

### 📋 시나리오 2: 특정 기능 구현 위치 찾기

**상황**: 로그인 기능이 어떻게 구현되어 있는지 찾고 싶다.

**🔍 Step-by-step:**
1. 인덱싱 완료 상태 확인
2. 질문: **"로그인 기능은 어디에 구현되어 있나요?"**
3. AI가 관련 파일과 메서드를 찾아서 설명
4. 추가 질문: **"로그인 실패 시 어떻게 처리되나요?"**
5. 더 자세한 분석: **"보안 검증은 어떤 방식을 사용하나요?"**

### 📋 시나리오 3: 에러 해결하기

**상황**: 특정 에러가 발생하는데 원인을 모르겠다.

**🔍 Step-by-step:**
1. 에러가 발생하는 코드 부분 선택 → "Send Selection to Chat"
2. 질문: **"이 코드에서 NullPointerException이 발생합니다. 원인이 무엇인가요?"**
3. AI 분석 결과 확인
4. 수정 요청: **"이 문제를 해결해주세요"**
5. 추가 예방책: **"유사한 문제를 방지하는 방법은 무엇인가요?"**

### 📋 시나리오 4: 테스트 코드 자동 생성

**상황**: 비즈니스 로직에 대한 단위 테스트가 필요하다.

```java
public class Calculator {
    public int add(int a, int b) {
        return a + b;
    }
    
    public double divide(double a, double b) {
        if (b == 0) {
            throw new IllegalArgumentException("0으로 나눌 수 없습니다");
        }
        return a / b;
    }
}
```

**🧪 Step-by-step:**
1. Calculator 클래스 선택 → "Send Selection to Chat"
2. 요청: **"이 클래스에 대한 JUnit 5 테스트를 만들어주세요"**
3. AI가 다양한 테스트 케이스 포함한 테스트 클래스 생성
4. 새 파일로 저장하거나 기존 테스트 파일에 추가

---

## 🎨 고급 활용 팁

### 💬 효과적인 질문 방법

#### **🟢 코드베이스 질문 (RAG) 예시**
```
✅ "이 프로젝트에서 예외 처리는 어떤 패턴을 사용하나요?"
✅ "사용자 인증 로직의 보안 수준은 어떻게 되나요?"
✅ "데이터베이스 트랜잭션은 어떻게 관리되나요?"
✅ "REST API의 응답 형식은 어떻게 정의되어 있나요?"
✅ "로깅 시스템은 어떻게 구현되어 있나요?"
```

#### **🟢 코드 수정 질문 예시**
```
✅ "이 메서드의 시간 복잡도를 분석해주세요"
✅ "Spring Security를 적용해주세요"
✅ "이 코드에 로깅을 추가해주세요"
✅ "데이터베이스 연결 부분을 개선해주세요"
✅ "이 전체 파일을 Clean Code 원칙에 맞게 리팩토링해주세요"
```

#### **🔴 피해야 할 질문 예시**
```
❌ "이거 뭐야?"
❌ "고쳐줘"
❌ "더 좋게"
❌ "문제 있어?"
```

### 🔧 맞춤형 프롬프트 설정

**"Prompt" 버튼을 클릭하여 AI의 역할을 변경할 수 있습니다:**

```
🎭 시니어 개발자 모드:
"당신은 20년 경력의 시니어 Java 개발자입니다. 
코드 리뷰 시 성능, 보안, 유지보수성을 중점적으로 검토해주세요."

📚 코드 교육자 모드:
"당신은 친절한 프로그래밍 선생님입니다. 
초보자가 이해하기 쉽게 단계별로 설명해주세요."

🔍 프로젝트 분석가 모드:
"당신은 프로젝트 아키텍처 전문가입니다. 
코드베이스 전체의 구조와 패턴을 분석하여 설명해주세요."
```

### ⚡ 단축키 활용

```
키보드 단축키:
- Ctrl + Enter: 메시지 전송
- 코드 선택 후 우클릭: 빠른 컨텍스트 전송
```

---

## 🚨 자주 발생하는 문제와 해결법

### ❓ 자동 인덱싱이 너무 오래 걸려요

**원인**: 프로젝트 크기가 크거나 복잡한 파일이 많음
**해결법**:
1. 인덱싱 진행 메시지 확인 (정상 동작 중)
2. 대용량 프로젝트는 2-3분 소요 가능
3. 인덱싱 중에도 일반 질문은 가능
4. **Tools → Show Indexing Statistics**로 진행 상황 확인
5. **Tools → Force Reindexing**으로 강제 재시작 가능

### ❓ 코드베이스 질문이 "관련 코드를 찾을 수 없습니다"로 나와요

**원인**: 인덱싱이 완료되지 않았거나 검색어가 부정확
**해결법**:
1. 인덱싱 완료 메시지 확인
2. 더 구체적인 키워드 사용
3. 파일명이나 클래스명 포함하여 질문
4. Reset 후 재인덱싱

### ❓ RAG_QUESTION 응답이 부정확해요

**원인**: 검색 키워드가 모호하거나 관련 코드가 부족
**해결법**:
1. 더 구체적인 용어 사용
2. 여러 번 다른 방식으로 질문
3. 특정 파일이나 클래스명 언급
4. 코드 선택 후 추가 질문

### ❓ 인증 팝업이 나타나지 않아요

**원인**: 이미 인증된 상태이거나 설정 파일 문제
**해결법**:
1. **🔐 인증** 버튼을 클릭해서 수동 인증
2. **Reset** 버튼으로 인증 상태 초기화 후 재인증
3. 플러그인 재시작

### ❓ 서버 URL을 바꿨는데 연결이 안 돼요

**원인**: 잘못된 URL 형식이나 서버 문제
**해결법**:
1. **🌐 URL** 버튼에서 올바른 형식 확인 (`http://IP:PORT/v1`)
2. LM Studio 서버가 해당 주소에서 실행 중인지 확인
3. 방화벽 및 네트워크 연결 상태 확인

---

## 🎯 사용 사례별 체크리스트

### ✅ 첫 사용 시 (필수)
- [ ] 🔐 인증키 입력: `semas1@3`
- [ ] 🌐 서버 URL 설정 (필요 시)
- [ ] 인증 성공 메시지 확인
- [ ] 🎉 자동 인덱싱 완료 메시지 확인
- [ ] 프로젝트 질문으로 연결 테스트

### ✅ 프로젝트 탐색 시
- [ ] 인덱싱 완료 상태 확인
- [ ] "이 프로젝트의 주요 기능은?" 질문
- [ ] 구조 및 아키텍처 질문
- [ ] 핵심 컴포넌트 위치 파악
- [ ] 관련 문서나 설정 파일 확인

### ✅ 코드 리뷰를 받을 때
- [ ] 인증 상태 확인 (🔐 버튼)
- [ ] 코드 선택 후 컨텍스트 설정
- [ ] "이 코드를 리뷰해주세요" 요청
- [ ] 구체적인 개선 요청
- [ ] Diff 창에서 변경사항 검토
- [ ] 적용 전 백업 확인

### ✅ 문제 해결 시
- [ ] 에러 발생 코드 선택
- [ ] 구체적인 에러 상황 설명
- [ ] 관련 프로젝트 코드 검색
- [ ] 해결 방안 구현 요청
- [ ] 예방 방법 추가 질문

---

## 🎉 실습 미션

### 🆕 인증 및 인덱싱 체험 미션 (5분)
1. 챗봇 창 열기
2. 인증 팝업에 `semas1@3` 입력
3. 자동 인덱싱 진행 과정 관찰
4. 인덱싱 완료 후 통계 확인
5. "이 프로젝트는 무엇을 하는 프로젝트인가요?" 질문

### 🏃‍♂️ 초급 미션 (10분)
1. 인덱싱 완료 확인
2. 프로젝트 주요 기능 질문
3. 특정 클래스나 메서드 찾기
4. 간단한 코드 수정 요청
5. Diff 창에서 적용

### 🚴‍♂️ 중급 미션 (20분)
1. 특정 기능의 구현 방식 질문
2. 보안이나 성능 관련 분석 요청
3. 코드 개선 방안 질문
4. 테스트 코드 생성 요청
5. 전체적인 아키텍처 분석

---

## 🔗 추가 리소스

### 📚 참고 문서
- [공식 README](README.md): 기술적 세부사항
- [IntelliJ IDEA 플러그인 가이드](https://plugins.jetbrains.com/docs/intellij/)
- [LM Studio 설정 가이드](https://lmstudio.ai/docs)

### 🆘 도움 요청
- GitHub Issues: 버그 신고
- 팀 슬랙: 실시간 도움
- 사내 위키: 사용 사례 공유

---

<p align="center">
  <strong>🎯 스마트한 코딩의 시작, 소진공 AI 챗봇과 함께하세요!</strong>
</p>

<p align="center">
  💡 <strong>Tip:</strong> 이 가이드를 북마크해두고 필요할 때마다 참고하세요!
</p>

---

*Last updated: 2025년 1월*  
*Version: 1.2.0* - 실시간 인덱싱 시스템 & 성능 최적화 기능 추가